<!DOCTYPE html>
<html>

<head>

  <meta charset="UTF-8" >
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>KAAZING.org - KAAZING.org Docs</title>
  <link rel="canonical" href="/documentation/5.0/windows/o_dev_dotnet/" />
  <link rel="icon" href="/img/favicon.ico">

  <link href='http://fonts.googleapis.com/css?family=Muli:300,400' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/bootstrap.min.css">
  <link rel="stylesheet" href="../../assets/font-awesome-4.1.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="../../css/pygments.css">
  <link rel="stylesheet" href="../../css/main.css">
  <link rel="stylesheet" href="../../css/syntax.css">
  <link rel="stylesheet" href="../../css/doc.css">

  
  <!--[if lt IE 9]>
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.js"></script>
  <![endif]-->

</head>

<body>

    <!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="../../index.html"><img id="kaazing-logo-header" src="../../img/KAAZING.png" alt="KAAZING.org"></img></a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav navbar-right">
				<li><a href="http://github.com/kaazing" target="_blank">GitHub</a></li>
				<li><a href="http://developer.kaazing.com/documentation/5.0/index.html">Documentation</a></li>
				<li><a href="http://kaazing.org/download">Download</a></li>
				<li><a href="http://kaazing.org/demos">Demos</a></li>
				<li><a href="http://kaazing.org/demos/quick-start">Quick Start</a></li>
				<li><a href="http://kaazing.org/blog">Blog</a></li>
				<li class="hidden-sm"><a href="http://kaazing.org/developer-subscription">Developer Subscription</a></li>
			</ul>
		</div><!--/.nav-collapse -->
	</div>
</nav>

<div id="diagnostic">
</div>


    <div class="container page-content text-left">

  <link rel="stylesheet" href="/css/doc.css">

<div class="container page-content text-left">
<h1>Walkthrough: Deploy a JavaScript JMS App as a Hybrid Android App <img src="../../images/enterprise-feature.png" alt="This feature is available in KAAZING Gateway - Enterprise Edition" /></h1>

<p>In this walkthrough, you will learn how to deploy an existing JavaScript JMS web app built with the Kaazing Gateway JavaScript JMS libraries as a hybrid app for Android. This topic walks you through the following subjects:</p>

<ol>
<li><a href="#Accomplish">What You Will Accomplish</a></li>
<li><a href="#Before">Before You Begin</a></li>
<li><a href="#Install">Install the Gateway, Android SDK, ADT Plugin and APIs for Eclipse, and PhoneGap 2.0</a></li>
<li><a href="#Device">Create a New Android Virtual Device in Eclipse</a></li>
<li><a href="#Project">Create a New Project in Eclipse for Android</a></li>
<li><a href="#Populate">Create and Populate the Project Directory for the Hybrid Android App</a></li>
<li><a href="#Apache">Configure and Run the Gateway and Apache ActiveMQ</a></li>
<li><a href="#Build">Build and Test the Hybrid Android App</a></li>
<li><a href="#summary">Summary</a></li>
</ol>

<span class="note"><b>Notes:</b>
 <ul class="arrow-2">
   <li>A hybrid Android app is a hybrid of a browser-based application and a native Android app. A native Android app is built using the Android SDK. A hybrid Android app is built using HTML, CSS, and JavaScript like a typical browser-based application, and then packaged in a framework that allows it to be converted into an app that runs on Android devices much like a native app. Hybrid Android apps enable web developers to leverage their web experience to create apps for Android. For information on native Android development, see the <a href="http://developer.android.com/develop/index.html">Android Develop</a>.</li>
   <li>A hybrid Android app is also different from a browser-based application that is intended for viewing in a browser on Android, but not downloaded through the Android app store. If you have an existing Kaazing Gateway JavaScript JMS browser-based application, you can use it to create a hybrid Android app or you can modify its web content to make it compatible with browsers on Android.</li>
 </ul>
</span>

<h2><a name="Accomplish"></a>What You Will Accomplish</h2>
<p>At the end of this walkthrough, a JavaScript JMS demo created using the Kaazing Gateway JavaScript JMS libraries runs as a hybrid Android app on Android, connects to the Apache ActiveMQ broker via the Gateway, and sends and receives JMS messages using a native or emulated WebSocket connection. Users can run the hybrid Android app on any Android device and connect via the Gateway to the Apache ActiveMQ broker.</p>
<p>This walkthrough uses the out of the box JavaScript JMS demo that ships with the Gateway as the example app, but the steps outlined in this walkthrough are the same for other JavaScript JMS client applications built with the Gateway.</p>


<p><span class="note"><strong>Note</strong>: For this walkthrough, you can use any JMS-compliant message broker. By default, the Gateway is configured to connect to the server on tcp://localhost:61613. You can configure the connect URL in the file <span class="code_inline"><em>GATEWAY_HOME</em>/conf/gateway-config.xml</span>. See <a href="../integration-jms/o_jms_integrate.html">About Integrating Kaazing Gateway and JMS-Compliant Message Brokers</a> for more information.</span></p>


<h2><a name="Before"></a>Before You Begin</h2>
<p>Before starting this walkthrough you need the following:</p>
<ul class="arrow-2">
<li>Kaazing Gateway. See <a href="../about/setup-guide.html">Setting Up Kaazing Gateway</a>.</li>
<li><a href="http://www.eclipse.org/downloads/">Eclipse Classic</a></li>
<li><a href="http://developer.android.com/sdk/index.html">Android SDK</a></li>
<li><a href="http://developer.android.com/sdk/installing/installing-adt.html">ADT Plugin for Eclipse</a></li>
<li><a href="http://phonegap.com/download">PhoneGap 2.0</a> (PhoneGap is a distribution of Apache Cordova)</li>
</ul>

<p>Learn about supported browsers, operating systems, and platform versions in <a href="../../release-notes.html">Release Notes</a>.</p>

<p><strong>Note:</strong> Steps for installing and configuring Android SDK, ADT Plugin for Eclipse, and PhoneGap 2.0 are included in this walkthrough.</p>

<h2><a name="Install"></a>Install the Gateway, Android SDK, ADT Plugin and APIs for Eclipse, and PhoneGap 2.0</h2>
<p>The following steps take you through the installation of the software required for deploying a hybrid Android app. If you have already have this software installed, you can simply note the locations of the installed software for later use with the shell script.</p>
<ol>
<li>Install the Gateway as described in <a href="../about/setup-guide.html">Setting Up Kaazing Gateway</a>.</li>    
<li>Install <a href="http://www.eclipse.org/downloads/">Eclipse Classic</a>. See the Eclipse installation instructions for details.</li>    
<li><p>Download and install the Android SDK from <a href="http://developer.android.com/sdk/index.html">http://developer.android.com/sdk/index.html</a>.</p>
    <p><strong>Tip:</strong> For steps on installing the Android SDK on your platform, see <a href="http://developer.android.com/sdk/installing/index.html">Installing the SDK from Android Develop</a>.</p>
    </li>    
<li>In a browser, navigate to <a href="http://developer.android.com/sdk/installing/installing-adt.html">http://developer.android.com/sdk/installing/installing-adt.html</a> and follow the instructions to download and configure the ADT Plugin for Eclipse.</li>    
<li>Once the ADT Plugin is installed, restart Eclipse.</li>    
<li><p>In Eclipse, install the Android API 2.2 and 4.1.</p>
    <ol type="a">
        <li>Click <strong>Window</strong>, and then click <strong>Android SDK Manager</strong>.</li>
        <li><p>Select the <strong>Android 2.2</strong> and the <strong>Android 4.1</strong> packages and then click <strong>Install packages</strong>.</p>
            <p><strong>Note:</strong> You might be prompted to install these packages automatically after you restarted Eclipse. Once the packages are installed, your Android SDK Manager should look like this:</p>
                <figure>
                <img src="../images/android-sdk-installed.jpg">    
                <figcaption><strong>Figure: Android SDK Manager with the required packages installed</strong></figcaption>    
                </figure>
            </li>
    </ol>
    </li>    
<li>Download PhoneGap 2.0 from <a href="http://phonegap.com/download">http://phonegap.com/download</a> and extract its contents. (PhoneGap 2.0 is also called Apache Cordova.)</li>    
</ol>


<h2><a name="Device"></a>Create a New Android Virtual Device in Eclipse</h2>
<p>The following steps take you through the creation of a virtual device using the Android ADT plugin. This virtual device is the Android emulator that you will use to test your hybrid Android app.</p>
<ol>
    <li>In Eclipse, to create a new virtual device, click <strong>Window</strong>, and then click <strong>AVD Manager</strong>.</li>
    <li>In AVD Manager, click <strong>New</strong>.</li>
    <li>Enter a name for your new virtual device in <strong>Name</strong> (for example, myTablet).</li>
    <li>In <strong>Target</strong>, select <strong>GALAXY Tab Addon</strong>.</li>
    <li>In <strong>Built-in</strong>, select <strong>GALAXY Tab</strong>.</li>
    <li>In <strong>Hardware</strong>, click <strong>New</strong>.</li>
    <li>In <strong>Property</strong>, select <strong>Keyboard support</strong> and click <strong>OK</strong>.</li>
    <li>In <strong>Hardware</strong>, set the value for the <strong>Keyboard support</strong> property to <strong>yes</strong>. </li>
    <li>Click <strong>Create AVD</strong>.</li>
    <li>In AVD Manager, select the new virtual device and click <strong>Start</strong>.</li>
    <li><p>In <strong>Launch Options</strong>, click <strong>Launch</strong>.</p>
        <p>The Android emulator launches. You can close the AVD Manager dialogs in Eclipse.</p></li>
    <li>Close the Android emulator. It will launch automatically once you have built your hybrid Android app and run it from Eclipse.</li>
</ol>

<h2><a name="Project"></a>Create a New Project in Eclipse for Android</h2>
<p>The following steps take you through the process of creating the Eclipse project you will use to build your hybrid Android app.</p>                         

<p><strong>Note:</strong> This procedure is also documented in the Apache Cordova Documentation, <a href="http://docs.phonegap.com/en/2.0.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android">Getting Started with Android</a>.</p>

<ol>
    <li>In Eclipse, select <strong>New</strong> and click <strong>Project</strong>.</li>
    <li>Expand the <strong>Android</strong> folder, click <strong>Android Application Project</strong>, and click <strong>Next</strong>.</li>
    <li><p>In <strong>Application Name</strong>, give your new project a name. This is the name that will appear when the app is listed in the Play Store and on the Android device.</p>
        <p><strong>Important:</strong> Note the location where the project is being created. You will need this location later when you run the shell script to set up PhoneGap.</p></li>
    <li>Click <strong>Next</strong>.</li>
    <li>Use the default settings for Launcher icon and click <strong>Next</strong>.</li>
    <li>In <strong>Create Activity</strong>, select <strong>BlankActivity</strong> and click <strong>Next</strong>.</li>
    <li>In <strong>New Blank Activity</strong>, in <strong>Activity Name</strong>, enter <strong>JMSdemoActivity</strong> and click <strong>Finish</strong>. If there are dependencies that you need to install, the <strong>Finish</strong> button is not available. Click <strong>Next</strong>, click <strong>Install/Upgrade</strong>, follow the installation wizard, and then click <strong>Finish</strong>.</li>
</ol>


<h2><a name="Populate"></a>Create and Populate the Project Directory for the Hybrid Android App</h2>          
<p>The following steps will create the project directory for the hybrid Android app, and populate the directory with the web app files and JavaScript JMS library files required to communicate with the Gateway. The Gateway includes a shell script to help you perform these steps.</p>
<p><strong>Note:</strong> This procedure is also documented in the Apache Cordova Documentation, <a href="http://docs.phonegap.com/en/2.0.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android">Getting Started with Android</a>.</p>

<ol>
<li><p>Collect the following file locations for the shell script and define your project name.</p>
    <ul class="arrow-2">
        <li><span class="code_inline"><em>CORDOVA_HOME</em>/lib/android</span> - A subfolder in the extracted PhoneGap directory. For example, <span class="code_inline">C:\Users\Administrator\Desktop\phonegap-phonegap-2dbbdab\lib\android</span></li>
        <li><em><span class="code_inline">GATEWAY_HOME</span></em> - The folder where the Gateway and its components are located.</li>
        <li><em><span class="code_inline">PROJECT_DIRECTORY</span></em> - The directory where the Eclipse project you created is located.</li>
    </ul></li>
<li><p>Locate the shell script named <span class="code_inline">android.sh</span> (Mac and Linux) or <span class="code_inline">android.bat</span> (Windows) in the following location:</p>
    <p><span class="code_inline"><em>GATEWAY_HOME</em>/demo/cordova/android.sh</span>, or
    <span class="code_inline"><em>GATEWAY_HOME</em>\demo\cordova\android.bat</span></p>
    </li>
<li><p>Open a shell or command prompt on the location of the <span class="code_inline">android.sh</span> or <span class="code_inline">android.bat</span> file and enter the following command (this is a Mac example):</p>
    <p><span class="code_inline">./android.sh -c <em>CORDOVA_HOME</em>/lib/android -k <em>GATEWAY_HOME</em> -o <em>PROJECT_DIRECTORY</em></span></p>
    <p>For example, on a Mac:</p>
    <p><span class="code_inline">./android.sh -c /Users/johndoe/Desktop/phonegap-phonegap-2dbbdab/lib/android 
    -k /Users/johndoe/Desktop/Kaazing Gateway 
    -o /Users/johndoe/Desktop/workspace/JMSdemo</span></p>
    <p>On Windows:</p>
    <p><span class="code_inline">android.bat -c C:\Users\Administrator\Desktop\phonegap-phonegap-2dbbdab\lib\android 
        -k C:\Users\Administrator\Desktop\JMS\<em>version</em>\Kaazing Gateway 
        -o C:\Users\Administrator\workspace\JMSdemo</span></p>
    <p>The script copies the PhoneGap (Cordova) Android library, the Kaazing Gateway JavaScript JMS libraries, and the JavaScript JMS demo web files to the Eclipse projectâ€™s workspace and adds them to the necessary project subfolders.</p>
    </li>
<li>Right-click your project in Eclipse and click <strong>Refresh</strong>.</li>
<li>Expand the <strong>assets</strong> subfolder in your Eclipse project and you will see a folder named <strong>www</strong>. This folder contains all of web files for the app (HTML, JavaScript, CSS), including the JavaScript JMS library files, and the PhoneGap (Cordova) Android library.</li>
<li>Verify that the <strong>cordova-2.0.0.jar</strong> file is located in the <strong>libs</strong> subfolder of your Eclipse project.</li>
<li>Right click on the <strong>libs</strong> subfolder, select <strong>Build Path</strong>, and then click <strong>Configure Build Path</strong>.</li>
<li>In the <strong>Java Build Path</strong>, click the <strong>Libraries</strong> tab, and click <strong>Add JARs</strong>.</li>
<li>In <strong>JAR Selection</strong>, expand the <strong>libs</strong> folder under <strong>JMSDemo</strong>, click <strong>cordova-2.0.0.jar</strong> in the <strong>libs</strong> subfolder of the project and click <strong>OK</strong>. Then click <strong>OK</strong> to close <strong>Java Build Path</strong>.</li>
<li>Expand the <strong>src</strong> subfolder of your Eclipse project and locate the main Java file for your project: <strong>JMSdemoActivity.java</strong>. Double-click the file to open it.</li>
<li><p>Replace contents of the file with the following:</p>
<pre class="brush: java; toolbar: false;">
package com.example.jmsdemo;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import org.apache.cordova.*;

public class JMSdemoActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setContentView(R.layout.activity_jmsdemo);
        super.loadUrl("file:///android_asset/www/index.html");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_jmsdemo, menu);
        return true;
    }
}
</pre>    
    </li>
<li><p>Double-click <strong>AndroidManifest.xml</strong> in the Eclipse project explorer to view the XML contents (in Windows you might have to also click the <strong>AndroidManifest.xml</strong> tab to view the XML contents).</p>
        <figure style="margin-left:0px;">
            <img src="../images/android-manifest.png">
        <figcaption><strong>Figure: AndroidManifest.xml file's XML Contents</strong></figcaption>    
        </figure> 
    <p>You are now going to paste XML into the file to add permissions and support device orientation changes. </p> 
    <p><strong>Note:</strong> You are adding a list of permissions to your application. You should remove permissions you are not using before submitting your application to Google Play.</p>    
    </li>
<li><p>Paste the following highlighted contents of <strong>AndroidManifest.xml</strong> into your <strong>AndroidManifest.xml</strong>:</p>
<pre class="brush: xml; toolbar: false; highlight:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,36];">
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;com.example.jmsdemo&quot;
    android:versionCode=&quot;1&quot;
    android:versionName=&quot;1.0&quot; &gt;

    &lt;uses-sdk
        android:minSdkVersion=&quot;8&quot;
        android:targetSdkVersion=&quot;15&quot; /&gt;
    &lt;supports-screens 
    android:largeScreens=&quot;true&quot; 
    android:normalScreens=&quot;true&quot; 
    android:smallScreens=&quot;true&quot; 
    android:resizeable=&quot;true&quot; 
    android:anyDensity=&quot;true&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_LOCATION_EXTRA_COMMANDS&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_SMS&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.READ_CONTACTS&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WRITE_CONTACTS&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt; 
    &lt;uses-permission android:name=&quot;android.permission.GET_ACCOUNTS&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.BROADCAST_STICKY&quot; /&gt;    
    &lt;application
        android:icon=&quot;@drawable/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot;
        android:theme=&quot;@style/AppTheme&quot; &gt;
        &lt;activity
            android:name=&quot;.JMSdemoActivity&quot;
            android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|locale&quot;
            android:label=&quot;@string/title_activity_jmsdemo&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</pre>

<p><span class="note"><b>Note:</b> This manifest uses our example name <span class="code_inline">jmsdemo</span>. You will want to change the instances of <span class="code_inline">jmsdemo</span> to your project name when you create your own projects.</span></p>

<p>Permissions are set with <span class="code_inline">&lt;uses-permission /&gt;</span> tags, and orientation is set inside the <span class="code_inline">&lt;activity&gt;</span> tag.</p>
</li>
<li>Save your project.</li>
</ol>

<p><strong>Note:</strong> This walkthrough uses the out of the box JavaScript JMS demo as an example web app, but when you create your own JavaScript JMS app, you can create it in your favorite IDE and then copy it to this <strong>www</strong> directory. You must name the HTML file for your app <strong>index.html</strong> and you must ensure that links in <strong>index.html</strong> point to the JavaScript WebSocket (by default, <span class="code_inline"><em>GATEWAY_HOME</em>/lib/client/javascript</span>) and JMS library (by default, <span class="code_inline"><em>GATEWAY_HOME</em>/lib/client/javascript/jms</span>) files and Cordova library are updated to reflect the new location:</p>
<pre class="brush: xml; toolbar: false;">
&lt;script src=&quot;cordova-2.0.0.js&quot; type=&quot;text/javascript&quot; language=&quot;javascript&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;WebSocket.js&quot; type=&quot;text/javascript&quot; language=&quot;javascript&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;JmsClient.js&quot; type=&quot;text/javascript&quot; language=&quot;javascript&quot;&gt;&lt;/script&gt;
</pre>

<h2><a name="Apache"></a>Configure and Run the Gateway and Apache ActiveMQ</h2>
<p>Now that you've set up the project for your Android app, you can start Apache ActiveMQ and the Gateway. The following steps start the Apache ActiveMQ service that is included with the Gateway, configure the Gateway to work with the hybrid Android app, and then run the Gateway.</p>
<ol>
<li>Start Apache ActiveMQ. For steps on starting Apache ActiveMQ, see the setup information for Apache ActiveMQ.</li>
<li>Open the <span class="code_inline"><em>GATEWAY_HOME</em>/conf/gateway-config.xml</span> file in a text editor. You need to modify this file to use the Android Emulator loopback IP address (10.0.2.2) and you need to change the cross site constraint to allow any origin in order to run the app locally. 10.0.2.2 is the special alias to your host loopback interface (127.0.0.1 on your development machine). For more information about Android Emulator networking, see <a href="http://developer.android.com/tools/devices/emulator.html#emulatornetworking">Emulator Networking</a>.</li>
<li><p>Modify the jms service to use the Android loopback IP address and the cross site constraint to allow any origin:</p>
<pre class="brush: xml; toolbar: false;highlight:[2,18,19,20,32];">
&lt;service&gt;
    &lt;accept&gt;ws://10.0.2.2:${gateway.extras.port}/jms&lt;/accept&gt;

    &lt;type&gt;jms&lt;/type&gt;

    &lt;properties&gt;
      &lt;connection.factory.name&gt;ConnectionFactory&lt;/connection.factory.name&gt;
      &lt;context.lookup.topic.format&gt;dynamicTopics/%s&lt;/context.lookup.topic.format&gt;
      &lt;context.lookup.queue.format&gt;dynamicQueues/%s&lt;/context.lookup.queue.format&gt;
      &lt;env.java.naming.factory.initial&gt;
        org.apache.activemq.jndi.ActiveMQInitialContextFactory
      &lt;/env.java.naming.factory.initial&gt;
      &lt;env.java.naming.provider.url&gt;
        tcp://localhost:61613
      &lt;/env.java.naming.provider.url&gt;
    &lt;/properties&gt;

    &lt;accept-options&gt;
        &lt;ws.bind&gt;build-macmini3.kaazing.test:${gateway.extras.port}&lt;/ws.bind&gt;
    &lt;/accept-options&gt;

    &lt;realm-name&gt;demo&lt;/realm-name&gt;

    &lt;!--
    &lt;authorization-constraint&gt;
      &lt;require-role&gt;AUTHORIZED&lt;/require-role&gt;
    &lt;/authorization-constraint&gt;
    --&gt;

    &lt;cross-site-constraint&gt;
      &lt;!--allow-origin&gt;http://build-macmini3.kaazing.test:${gateway.extras.port}&lt;/allow-origin--&gt;
      &lt;allow-origin&gt;*&lt;/allow-origin&gt;
    &lt;/cross-site-constraint&gt;
&lt;/service&gt;
</pre>    
    </li>
<li>Save the <span class="code_inline">gateway-config.xml</span> file.</li>
<li><p>Invoke the <span class="code_inline">gateway.start</span> command by navigating to the <span class="code_inline"><em>GATEWAY_HOME</em>/bin</span> directory where you installed the Gateway and then enter the following to run the <span class="code_inline">gateway.start</span> script:</p>
    <p><span class="code_inline">./gateway.start</span> (Mac and Linux)</p>
    <p><span class="code_inline">gateway.start.bat</span> (Windows)</p>
    <p>The output from the command will display that the Gateway is listening on:</p>
    <p><span class="code_inline">ws://10.0.2.2:8001/jms @ localhost:8001</span></p></li>
</ol>

<h2><a name="Build"></a>Build and Test the Hybrid Android App</h2>
<p>The following steps build the hybrid Android app that you created in Eclipse.</p>
<span class="note"><b>Notes:</b>
 <ul class="arrow-2">
   <li>Both the Gateway and Apache ActiveMQ must be running before testing the hybrid Android app.</li>
   <li>In order to connect the hybrid Android app on the Android device to the Gateway and Apache ActiveMQ, the Android device must be able to resolve the host name of computer running the Gateway on the network. This is the host name that you will use in the Location field of the hybrid Android app. For example, <span class="code_inline">ws://host_name:8001/jms</span>. You can also configure the Gateway to use the IP Address of the computer running the Gateway (for example, <span class="code_inline">ws://192.168.4.86:8001/jms</span>). Using the IP Address is often the easiest method during testing.</li>
 </ul>
</span>

<ol>
<li><p>In Eclipse, right-click the project, select <strong>Run As</strong>, and then click <strong>Android Application</strong>.</p>
    <p>The Android emulator launches.</p></li>
<li><p>Unlock Android.</p>
    <p>The hybrid Android app is displayed.</p></li>
<li><p>Click in the <strong>Location</strong> field, and enter the jms service URI (<span class="code_inline">ws://10.0.2.2:8001/jms</span>), and click <strong>Connect</strong>.</p> 
    <p>The <strong>Log messages</strong> field reports a successful connection.</p>
        <figure>
        <img src="../images/android-connected.png">    
        <figcaption><strong>Figure: Hybrid Android app Connecting To Apache ActiveMQ via the Gateway</strong></figcaption>    
        </figure>
</li>
<li>To test the hybrid Android app on an Android device, ensure USB debugging is enabled on your Android device (<strong>Settings</strong> > <strong>Applications</strong> > <strong>Development</strong>), and plug the device into your system.</li>
<li><p>In Eclipse, right-click the project, select <strong>Run As</strong>, and then click <strong>Android Application</strong>.</p>
<p>The hybrid Android app will deploy to your Android device.</p>
<p>For more information on testing your hybrid Android app on an Android device, see <a href="http://developer.android.com/tools/device.html#setting-up">Setting up a Device for Development</a> and <a href="http://developer.android.com/tools/extras/oem-usb.html">OEM USB Drivers</a> in the Android developer documentation (<a href="http://developer.android.com/">http://developer.android.com</a>).</p>
</li>
</ol>

<h2><a name="summary"></a>Summary</h2>
<p>In this walkthrough, you learned how to turn one of the out of the box Kaazing Gateway JavaScript JMS demos into a hybrid Android app. To learn how to build your own Kaazing Gateway JMS apps, refer to the <a href="../index.html">documentation</a>.</p>

<h2>Notes</h2>
<p>Clients built using Kaazing Gateway 3.x libraries will work against Kaazing Gateway 4.x. If you wish to upgrade your 3.x client to the 4.x libraries, please note that the 3.x clients used a single JMS library and 4.x clients include and use separate WebSocket and JMS libraries. Update your client library file and code references to include both the WebSocket and JMS libraries, as described in the 4.x documentation. For more migration information, see <a href="p_dev_js_client.html#migrate">Migrate JavaScript Applications to Kaazing Gateway 4.x.</a></p>


                  </section>
                </article>

            </div> <!-- #main -->
        </div> <!-- #main-container -->

    <footer>
  <div class="container">

    <div class="row text-center social-media">
      <a href="https://github.com/kaazing"><i class="fa fa-github" data-toggle="tooltip" data-placement="top" title="Github"></i></a>
      <a href="https://www.facebook.com/kaazing"><i class="fa fa-facebook" data-toggle="tooltip" data-placement="top" title="Facebook"></i></a>&nbsp;
      <a href="https://twitter.com/kaazing"><i class="fa fa-twitter" data-toggle="tooltip" data-placement="top" title="Twitter"></i></a>&nbsp;
      <a href="https://plus.google.com/+KaazingHome"><i class="fa fa-google-plus" data-toggle="tooltip" data-placement="top" title="Google Plus"></i></a>&nbsp;
      <a href="https://www.youtube.com/user/KaazingTV"><i class="fa fa-youtube" data-toggle="tooltip" data-placement="top" title="Youtube"></i></a>&nbsp;
      <a href="https://www.linkedin.com/company/kaazing-corporation"><i class="fa fa-linkedin" data-toggle="tooltip" data-placement="top" title="Linkedin"></i></a>&nbsp;
    </div>

    <div class="row copyright">
      <div class="col-xs-12 col-sm-5 text-left">
        &copy; 2007-2015 Kaazing Corporation
      </div>
      <div class="col-xs-12 col-sm-7 license">
        This website is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Creative Commons BY-NC-SA</a>
      </div>
    </div>

  </div>
</footer>

<!-- start:javascript for this page -->
<script src="/js/jquery-1.11.1.min.js"></script>
<script src="/js/bootstrap.min.js"></script>









<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1771436-3', 'auto');
  ga('send', 'pageview');
  </script
  <!-- end:javascript for this page -->


</body>
</html>
